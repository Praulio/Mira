# Spec File Templates

Complete, copy-paste ready templates for the 4 Ralph Loop spec files.

---

## 1. docs/specs/[feature]/spec.md

The main feature specification - vision, UX, architecture. Created by `/interview` + `/workflows:plan`.

```markdown
# Specs Lookup Table

Feature metadata and quick reference for Ralph Loop implementation.

---

## [Feature Name]

| Field | Value |
|-------|-------|
| **Slug** | `feature-slug` |
| **Alternative names** | Feature Name, Other Name, Alias |
| **Short description** | One-line description of what it does |
| **Long description** | Detailed explanation of the feature, its purpose, and how it works |
| **Category** | category1, category2 |
| **Keywords** | keyword1, keyword2, keyword3, keyword4 |
| **Technical base** | What existing code/patterns it builds on |
| **Main files** | `app/feature/page.tsx`, `lib/feature.ts` |
| **Status** | ðŸ”´ Not started / ðŸŸ¡ In progress / âœ… Completed |

### Search synonyms
- "alternative search term 1"
- "alternative search term 2"
- "how users might describe this"

### Related files
```
docs/specs/[feature]/spec.md                 # Full specification (permanent)
docs/specs/[feature]/implementation_plan.md  # Task checklist (temporary)
docs/specs/[feature]/prompt.md               # LLM instructions (temporary)
docs/specs/[feature]/discoveries.md          # Session memory (temporary)
```

---

## Patterns Discovered

> Updated during implementation. Add any pattern, convention, or important file discovered.

| Pattern | Description | Location |
|---------|-------------|----------|
| [Pattern name] | [What it does] | `path/to/file.ts` |

---

## Index

| Spec | Status | File |
|------|--------|------|
| [Feature Name] | ðŸŸ¡ In progress | `docs/specs/[feature]/spec.md` |
```

---

## 2. docs/specs/[feature]/prompt.md

Instructions Claude reads at the start of EVERY iteration. Generated by `/plan-to-ralph`.

```markdown
# [Feature Name] Implementation Prompt

> **Version:** 1.0.0
> **Feature:** [Feature description]
> **Status:** In Progress

---

## Your Role

You are implementing [Feature Name] using the Ralph Loop system. Each session:
1. Read specs and discoveries
2. Complete ONE task
3. Commit atomically
4. Exit

**CRITICAL:** You are LITERAL. Do NOT assume, infer, or add features not specified.

---

## Context

### What We're Building
[2-3 sentences describing the feature and its purpose]

### Technical Approach
[Key technical decisions already made]

### Reference Patterns
[Existing code to follow as examples]

---

## Spec Files

| File | Purpose | Read When |
|------|---------|-----------|
| `docs/specs/[feature]/spec.md` | Feature specification | Start of session |
| `docs/specs/[feature]/implementation_plan.md` | Task checklist | Finding next task |
| `docs/specs/[feature]/discoveries.md` | Memory from past sessions | Start of session |

---

## Core Rules (UNBREAKABLE)

1. **ONE TASK = ONE LOOP** - Never complete multiple tasks
2. **FRESH SESSION** - Your context resets after commit
3. **ATOMIC COMMITS** - Code + plan + discoveries in ONE commit
4. **SEQUENTIAL** - Always first unchecked `- [ ]`
5. **VERIFY** - Run lint/build/test before commit
6. **DISCOVERIES** - ALWAYS update, even if "nothing happened"

---

## Iteration Flow

```
PASO 0: Read PIN + Discoveries
PASO 1: Find first [ ] task
PASO 2: Execute ONLY that task
PASO 3: Verify (lint && build)
PASO 4: Test (per task type)
PASO 4.5: Update discoveries (MANDATORY)
PASO 4.6: Bug Auto-Healing (if needed)
PASO 5: Atomic commit
PASO 6: EXIT
```

---

## Verification Commands

Adapt to your stack:

```bash
# Node.js/pnpm
pnpm lint && pnpm build && pnpm test

# Python
ruff check . && pytest

# Ruby
rubocop && rspec

# Go
go vet ./... && go build ./... && go test ./...
```

---

## Commit Format

```
feat([scope]): [task description]

- [Change 1]
- [Change 2]

Task X.Y completed

Co-Authored-By: Claude <noreply@anthropic.com>
```

---

## Output Signals

```
RALPH_START: Starting session
RALPH_TASK: Executing [X.Y] - [description]
RALPH_VERIFY: Running verification
RALPH_COMMIT: [hash] - [message]
RALPH_COMPLETE: Task [X.Y] completed
RALPH_BLOCKED: Escalating - [reason]
```

---

## Bug Auto-Healing

If tests fail:
1. Analyze deeply (logs, code, related files)
2. Document root cause in discoveries
3. Apply intelligent fix
4. Re-test
5. If still failing, retry (max 10 attempts)
6. After 10 failures, escalate with `RALPH_BLOCKED`

---

## Quality Gates

Before marking ANY task complete:
- [ ] Code compiles/builds
- [ ] Linter passes
- [ ] Tests pass (existing + new if applicable)
- [ ] Changes match spec exactly
- [ ] Discoveries updated

---

## NOW: Start Iteration

1. Read `docs/specs/[feature]/spec.md`
2. Read `docs/specs/[feature]/discoveries.md`
3. Read `docs/specs/[feature]/implementation_plan.md`
4. Find first `- [ ]` task
5. Execute
```

---

## 3. docs/specs/[feature]/implementation_plan.md

Task checklist with phases. Start with Fase 0! Generated by `/plan-to-ralph`.

```markdown
# Implementation Plan: [Feature Name]

> **Started:** [Date]
> **Target:** [Date or "When complete"]
> **Progress:** 0/N tasks

---

## Fase 0: Activation & Smoke Test (CRITICAL)

> **Purpose:** Ensure the feature can be activated/accessed before building internals.

- [ ] **0.1** [Activation step - e.g., add route, register in config, add provider]

  **Context:**
  - Why: Feature needs to be accessible before we build internals
  - Current: [Feature doesn't exist / is not registered]
  - Target: [Feature is accessible at /path or via method]

  **Files:**
  - Primary: [main file]

  **Changes:**
  - Location: [Where to add]
  - AFTER:
    ```[lang]
    [code to add]
    ```

  **Validation:**
  - [ ] Feature is accessible (can navigate to it / call it)
  - [ ] No errors in console

- [ ] **0.2** Smoke test - verify basic rendering/response

  **Validation:**
  - [ ] Page renders without error
  - [ ] Basic element visible: [element description]

---

## Fase 1: [Phase Name]

> **Purpose:** [What this phase accomplishes]

- [ ] **1.1** [Task description]

  **Context:**
  - Why: [Reason]
  - Current: [Current state]
  - Target: [Desired state]

  **Files:**
  - Primary: `path/to/file.ts`

  **Changes:**
  - Location: [Line ~XX or element]
  - BEFORE:
    ```[lang]
    [current code]
    ```
  - AFTER:
    ```[lang]
    [new code]
    ```

  **Validation:**
  - [ ] Build passes
  - [ ] [Specific check]

  **Pitfalls:**
  - [Common mistake to avoid]

- [ ] **1.2** [Next task...]

---

## Fase 2: [Phase Name]

- [ ] **2.1** ...

---

## Fase N: Final Testing

- [ ] **N.1** Visual checkpoint - [full feature verification]
- [ ] **N.2** E2E test - [critical path verification]
- [ ] **N.3** Edge cases - [specific scenarios]

---

## Progress Log

| Task | Status | Date | Notes |
|------|--------|------|-------|
| 0.1 | â¬œ | - | - |
```

---

## 4. docs/specs/[feature]/discoveries.md

Memory between sessions. YOU update this every iteration.

```markdown
# Discoveries: [Feature Name]

> **Purpose:** Memory between Ralph Loop sessions. Claude updates this EVERY iteration.

---

## Quick Reference

### Key Files
| File | Purpose |
|------|---------|
| [Added as discovered] | |

### Key Patterns
| Pattern | Description |
|---------|-------------|
| [Added as discovered] | |

### Known Issues
| Issue | Status | Resolution |
|-------|--------|------------|
| [Added as discovered] | | |

---

## Session Log

### Session 1 - [Date]

**Task Completed:**
[X.Y] [Task description]

**Patterns Discovered:**
- [Pattern]: [Description]

**Issues Encountered:**
- [Issue]: [How resolved]

**Files Modified:**
- `path/to/file.ts` - [What changed]

**Notes for Next Session:**
- [Important context]

---

### Session 2 - [Date]

**Task Completed:**
[X.Y] [Task description]

...

---

## Accumulated Learnings

> Patterns and insights that apply to the entire feature.

### Architecture Decisions
- [Decision]: [Rationale]

### Gotchas
- [Gotcha]: [How to avoid]

### Reusable Patterns
- [Pattern]: [Where/how to reuse]
```

---

## Directory Structure

After running `/plan-to-ralph`:

```
docs/specs/[feature]/
â”œâ”€â”€ spec.md                    # Feature specification (PERMANENT)
â”œâ”€â”€ prompt.md                  # Instructions per iteration (temporary)
â”œâ”€â”€ implementation_plan.md     # Tasks with [ ] checkboxes (temporary)
â””â”€â”€ discoveries.md             # Memory between sessions (temporary)
```

**Lifecycle:**
- `spec.md` persists after feature completion (documentation)
- Other 3 files are deleted after feature completion

---

## Checklist Before Starting

- [ ] All 4 files created
- [ ] Fase 0 exists with activation step
- [ ] Tasks have BEFORE/AFTER code
- [ ] Spec Specificity Score â‰¥4/5 average
- [ ] Verification commands are correct for your stack
- [ ] `ralph-loop.sh` is executable
